!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){var i=n(13),o=n(14),s=n(15),r=n(17);e.exports=function(e,t){return i(e)||o(e,t)||s(e,t)||r()}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){var i=n(4);e.exports={name:"mkz_c_msg_history",cached:!1,history:[],getHistory:function(){if(this.cached&&i.cached)return this.history;this.cached=!0;var e=localStorage.getItem(this.name),t=[];try{t=JSON.parse(e)||[]}catch(e){}return this.history=this.sortHistory(t.concat(i.getHistory())),this.history},saveHistory:function(e){return this.cached=!1,localStorage.setItem(this.name,JSON.stringify(e.filter((function(e){return!e.exclude})))),e},addMsg:function(e){var t=this.getHistory(),n=this.findMsgIndex(e.muid),i={muid:e.muid,msg_type:e.msg_type,text:e.text,custom_fields:e.custom_fields,agent_id:e.agent_id,sender_type:e.sender_type,sent_at:e.sent_at,sender_avatar_url:e.sender_avatar_url,sender_name:e.sender_name,attachments:e.attachments,exclude:e.exclude};-1===n?t.push(i):t[n]=i,this.saveHistory(t)},getNextMsg:function(e){var t=this.findMsgIndex(e),n=this.getHistory();if(n[t+1])return n[t+1]},batchUpdateMsg:function(e,t){var n=this.getHistory(),i=n.filter(e);return i.map(t),this.saveHistory(n),i},findMsgIndex:function(e){return this.getHistory().findIndex((function(t){return t.muid===e}))},findMsg:function(e){return this.getHistory().find((function(t){return t.muid===e}))},sortHistory:function(e){for(var t=1,n=e.length;t<n;t++){for(var i=e[t],o=t;o>0&&new Date(e[o-1].sent_at)>new Date(i.sent_at);)e[o]=e[o-1],o--;e[o]=i}return e}}},function(e,t,n){function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s,r=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){a=!0,s=e},f:function(){try{r||null==i.return||i.return()}finally{if(a)throw s}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var s=n(11);e.exports={cached:!1,init:function(e){var t=this;this.app=e,this.libs=e.libs,this.cached=!1,this.items=s.getItems(),this.rendered=!1,this.libs.eEmit.subscribe("plugin.chat.auto_messages",this.saveItems.bind(this)),this.libs.eEmit.subscribe("plugin.chat.channel.entered",(function(){t.rendered=!0,t.renderNewItems()}))},getHistory:function(){return this.cached=!0,this.items.map((function(e){return e.payload}))},saveItems:function(e){var t=this;if(0!==e.length){this.cached=!1;var n=this.app.store.uid;this.items=s.addItems(e.map((function(e){var i=t.app.getDateTime(),o=+new Date(i);return{payload:{auto_message_uid:e.uid,agent_id:e.sender_id,attachments:[],muid:"".concat(n,":a:").concat(o),msg_type:"message:auto",sender_type:e.sender_type,sender_avatar_url:null,sender_name:null,sent_at:i,text:e.text,exclude:!0,custom_fields:e},state:"new",sent_at:i}}))),this.rendered&&this.renderNewItems()}},renderNewItems:function(){var e=this.items.filter((function(e){return"new"===e.state}));if(0!==e.length){this.cached=!1;var t,n=i(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.app.addMsg(o.payload),this.app.view.scrollBottom(),this.app.setCurrentAgent(o.payload.agent_id),this.trackShow(o.payload.custom_fields.uid),o.state="sent"}}catch(e){n.e(e)}finally{n.f()}this.app.view.showChat(),s.setItems(this.items)}},getMsgAgentId:function(e){var t=this.items.find((function(t){return t.payload.muid===e}));return t&&t.payload.agent_id||0},removeItem:function(e){this.cached=!1,this.items=s.removeItem(e)},trackShow:function(e){mkz("trackAutoMessageShow",{auto_message_uid:e})},trackReply:function(e){var t=this.items.find((function(t){return t.payload.muid===e}));if(t){var n=t.payload.custom_fields;mkz("trackAutoMessageReply",{auto_message_uid:n.uid,reply_text:n.text,reply_once:n.reply_once})}}}},function(e,t){e.exports={name:"mkz_c_delivered",addItem:function(e){var t=this.getList();return t.push(e),this.setList(t),t},getList:function(){var e=localStorage.getItem(this.name),t=[];try{t=JSON.parse(e)||[]}catch(e){}return t},setList:function(e){return localStorage.setItem(this.name,JSON.stringify(e)),e},resetList:function(){this.setList([])}}},function(e,t){e.exports="[mkz]{line-height:1}[mkz] html,[mkz] body,[mkz] div,[mkz] span,[mkz] applet,[mkz] object,[mkz] iframe,[mkz] h1,[mkz] h2,[mkz] h3,[mkz] h4,[mkz] h5,[mkz] h6,[mkz] p,[mkz] blockquote,[mkz] pre,[mkz] a,[mkz] abbr,[mkz] acronym,[mkz] address,[mkz] big,[mkz] cite,[mkz] code,[mkz] del,[mkz] dfn,[mkz] em,[mkz] img,[mkz] ins,[mkz] kbd,[mkz] q,[mkz] s,[mkz] samp,[mkz] small,[mkz] strike,[mkz] strong,[mkz] sub,[mkz] sup,[mkz] tt,[mkz] var,[mkz] b,[mkz] u,[mkz] i,[mkz] center,[mkz] dl,[mkz] dt,[mkz] dd,[mkz] ol,[mkz] ul,[mkz] li,[mkz] fieldset,[mkz] form,[mkz] label,[mkz] legend,[mkz] table,[mkz] caption,[mkz] tbody,[mkz] tfoot,[mkz] thead,[mkz] tr,[mkz] th,[mkz] td,[mkz] article,[mkz] aside,[mkz] canvas,[mkz] details,[mkz] embed,[mkz] figure,[mkz] figcaption,[mkz] footer,[mkz] header,[mkz] hgroup,[mkz] menu,[mkz] nav,[mkz] output,[mkz] ruby,[mkz] section,[mkz] summary,[mkz] time,[mkz] mark,[mkz] audio,[mkz] video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;color:inherit;font-weight:inherit;text-transform:inherit;max-width:none}[mkz] label,[mkz] legend{width:auto;height:auto}[mkz] input,[mkz] select,[mkz] textarea,[mkz] button{margin:0;padding:0;font-size:100%;font:inherit;vertical-align:baseline;background-image:none;outline:none}[mkz] article,[mkz] aside,[mkz] details,[mkz] figcaption,[mkz] figure,[mkz] footer,[mkz] header,[mkz] hgroup,[mkz] menu,[mkz] nav,[mkz] section{display:block}[mkz] ol,[mkz] ul{list-style:none}[mkz] blockquote,[mkz] q{quotes:none}[mkz] blockquote:before,[mkz] blockquote:after,[mkz] q:before,[mkz] q:after{content:'';content:none}[mkz] table{border-collapse:collapse;border-spacing:0}[mkz] .mkz-c{text-align:left;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;font-size:15px;color:#333}[mkz] .mkz-c *{font-family:Geneva,Arial,Helvetica,sans-serif;-webkit-tap-highlight-color:transparent}[mkz] .mkz-c_chat_show .mkz-c__chat{opacity:1;visibility:visible}[mkz] .mkz-c_beacon_show .mkz-c__handler{opacity:1;visibility:visible}[mkz] .mkz-c_beacon_show .mkz-c__btn{animation-play-state:paused}[mkz] .mkz-c_beacon_show.mkz-c_tooltip_yes .mkz-c__tooltip{opacity:1;visibility:visible}[mkz] .mkz-c_agent_assign .mkz-c__m-unassign-text{display:none}[mkz] .mkz-c_agent_assign .mkz-c__m-assign-text,[mkz] .mkz-c_agent_assign .mkz-c__m-assign-post,[mkz] .mkz-c_agent_assign .mkz-c__m-assign-avatar{display:block}[mkz] .mkz-c_agent_online .mkz-c__state{background-color:#0EC52C}[mkz] .mkz-c_agent_online .mkz-c__btn-text-online{display:block}[mkz] .mkz-c_agent_online .mkz-c__btn-text-offline{display:none}[mkz] .mkz-c__handler{transition:opacity 0.2s linear, visibility 0.4s 0s linear;opacity:0;visibility:hidden;position:fixed;z-index:20000000}[mkz] .mkz-c__handler_position_l-t{left:0;top:0}[mkz] .mkz-c__handler_position_r-t{right:0;top:0}[mkz] .mkz-c__handler_position_l-b{left:0;bottom:0}[mkz] .mkz-c__handler_position_r-b{right:0;bottom:0}[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_bouncing_yes .mkz-c__btn{animation:mkzBounceMdScale  5s infinite linear}[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_position_l-t .mkz-c__tooltip,[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_position_l-b .mkz-c__tooltip{left:100%;right:auto;margin-left:15px;margin-right:0;border-radius:0 6px 6px 0}[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_position_l-t .mkz-c__tooltip:after,[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_position_l-b .mkz-c__tooltip:after{left:-10px;right:auto;transform:rotate(180deg)}[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_position_l-t .mkz-c__tooltip:before,[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_position_l-b .mkz-c__tooltip:before{left:-1px;right:auto}[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_position_l-t .mkz-c__tooltip_picture_yes,[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_position_l-b .mkz-c__tooltip_picture_yes{padding-left:5px;padding-right:40px}[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_position_l-t .mkz-c__tooltip-picture,[mkz] .mkz-c__handler_type_bubble.mkz-c__handler_position_l-b .mkz-c__tooltip-picture{position:absolute;left:auto;right:-35px}[mkz] .mkz-c__handler_type_bubble .mkz-c__btn{width:60px;height:60px;border-radius:50%;background-color:#eee;color:#000;display:flex;align-items:center;justify-content:center;transition:transform 0.2s linear;box-shadow:0 0 10px rgba(25,25,29,0.25)}[mkz] .mkz-c__handler_type_bubble .mkz-c__btn:hover{transform:scale(1.1);animation-play-state:paused}[mkz] .mkz-c__handler_type_bubble .mkz-c__btn-text{display:none}[mkz] .mkz-c__handler_type_bubble .mkz-c__tooltip{position:absolute;right:100%;top:50%;margin-right:15px;transform:translateY(-50%);box-shadow:0 0 10px rgba(25,25,29,0.25);color:#fff;background:#4F4F4F;padding:5px;border-radius:6px 0 0 6px;width:160px;box-sizing:border-box}[mkz] .mkz-c__handler_type_bubble .mkz-c__tooltip:after{content:'';position:absolute;right:-10px;top:0;bottom:0;width:10px;clip-path:polygon(0 0, 0 0, 100% 50%, 0 100%);background:inherit;box-shadow:0 0 10px rgba(25,25,29,0.25)}[mkz] .mkz-c__handler_type_bubble .mkz-c__tooltip:before{content:'';position:absolute;right:-1px;top:1px;bottom:1px;width:2px;background:inherit}[mkz] .mkz-c__handler_type_bubble .mkz-c__tooltip_picture_yes{padding-left:40px}[mkz] .mkz-c__handler_type_bubble .mkz-c__tooltip-text{font-size:12px;line-height:16px;text-align:center;max-width:100%;overflow:hidden;text-overflow:ellipsis}[mkz] .mkz-c__handler_type_bubble .mkz-c__tooltip-picture{position:absolute;left:-35px;top:50%;transform:translateY(-50%);max-width:79px}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_bouncing_yes .mkz-c__btn{animation:mkzBounceSmScale  5s infinite linear}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l-t{margin-top:0 !important}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_r-t{margin-top:0 !important}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l-b{margin-bottom:0 !important}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_r-b{margin-bottom:0 !important}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l-t .mkz-c__btn,[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_r-t .mkz-c__btn{border-radius:0 0 15px 15px}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l-t .mkz-c__btn:hover,[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_r-t .mkz-c__btn:hover{padding-top:20px;padding-bottom:8px}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l-t .mkz-c__tooltip,[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_r-t .mkz-c__tooltip{bottom:auto;top:100%;margin-top:25px;margin-bottom:0;border-radius:0 0 6px 6px}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l-t .mkz-c__tooltip:after,[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_r-t .mkz-c__tooltip:after{content:'';position:absolute;left:0;right:0;bottom:100%;top:auto;transform:rotate(180deg)}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_t .mkz-c__btn,[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l .mkz-c__btn{border-radius:0 0 15px 15px}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_t .mkz-c__btn:hover,[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l .mkz-c__btn:hover{padding-top:20px;padding-bottom:8px}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_t .mkz-c__tooltip,[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l .mkz-c__tooltip{bottom:auto;top:100%;margin-top:25px;margin-bottom:0;border-radius:0 0 6px 6px}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_t .mkz-c__tooltip:after,[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l .mkz-c__tooltip:after{content:'';position:absolute;left:0;right:0;bottom:100%;top:auto;transform:rotate(180deg)}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_t{right:0;top:0;margin-top:0 !important}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_l{transform:rotate(-90deg) translateX(-100%);transform-origin:0 0;left:0;top:0;margin-left:0 !important}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_r{transform:rotate(-90deg) translateY(-100%);transform-origin:100% 0;right:0;top:0;margin-right:0 !important}[mkz] .mkz-c__handler_type_bar.mkz-c__handler_position_b{right:0;bottom:0;margin-bottom:0 !important}[mkz] .mkz-c__handler_type_bar .mkz-c__tooltip-picture{display:none}[mkz] .mkz-c__handler_type_bar .mkz-c__btn{display:flex;align-items:center;padding:8px 20px;border-radius:15px 15px 0 0;transition:padding 0.2s ease-out}[mkz] .mkz-c__handler_type_bar .mkz-c__btn:hover{padding-bottom:20px;animation-play-state:paused}[mkz] .mkz-c__handler_type_bar .mkz-c__btn-text{flex:1;font-size:14px;line-height:18px;font-weight:600;max-width:230px;min-height:18px}[mkz] .mkz-c__handler_type_bar .mkz-c__btn-text-online,[mkz] .mkz-c__handler_type_bar .mkz-c__btn-text-offline{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[mkz] .mkz-c__handler_type_bar .mkz-c__btn-picture{flex:0 0 14px;height:14px;margin-left:5px}[mkz] .mkz-c__handler_type_bar .mkz-c__tooltip{position:absolute;bottom:100%;right:0;margin-bottom:25px;box-shadow:0 0 10px rgba(25,25,29,0.25);color:#fff;background:#7261FF;padding:30px 5px;border-radius:6px 6px 0 0;min-width:47px;max-width:80px;box-sizing:border-box;font-weight:600;font-size:16px;line-height:18px;text-align:center}[mkz] .mkz-c__handler_type_bar .mkz-c__tooltip:after{content:'';position:absolute;left:0;right:0;top:100%;height:20px;clip-path:polygon(0 0, 50% 100%, 100% 0, 0 0);background:inherit;box-shadow:0 0 10px rgba(25,25,29,0.25);margin:-1px 0}[mkz] .mkz-c__handler_type_bar .mkz-c__tooltip .mkz-c__tooltip-text{overflow:hidden;text-overflow:ellipsis}[mkz] .mkz-c__btn-text-online{display:none}[mkz] .mkz-c__btn-text-offline{display:block}[mkz] .mkz-c__tooltip{opacity:0;visibility:hidden;transition:opacity 0.2s linear, visibility 0.4s 0s linear}[mkz] .mkz-c__submit{cursor:pointer;transition:all linear 0.2s;opacity:1;color:#787878}[mkz] .mkz-c__submit_disabled_yes{cursor:default;opacity:0.5}[mkz] .mkz-c__chat{transition:opacity 0.2s linear, visibility 0.4s 0s linear;opacity:0;visibility:hidden;position:fixed;right:0;bottom:0;width:100%;max-width:375px;max-height:800px;height:100vh;z-index:20000000}[mkz] .mkz-c__chat_position_left{left:0;right:auto}[mkz] .mkz-c__chat_position_left .mkz-c__cart,[mkz] .mkz-c__chat_position_left .mkz-c__cart-shadow{right:0;left:25px}[mkz] .mkz-c__cart,[mkz] .mkz-c__cart-shadow{position:absolute;left:0;top:25px;right:25px;bottom:25px;display:flex;justify-content:stretch;flex-direction:column;border-radius:6px;z-index:5}[mkz] .mkz-c__cart-shadow{z-index:0;box-shadow:0 0 10px rgba(25,25,29,0.25);opacity:0.75}[mkz] .mkz-c__head,[mkz] .mkz-c__content,[mkz] .mkz-c__docs,[mkz] .mkz-c__footer{padding:0 15px}[mkz] .mkz-c__head,[mkz] .mkz-c__docs,[mkz] .mkz-c__footer{flex:0}[mkz] .mkz-c__content,[mkz] .mkz-c__docs{background-color:#fff}[mkz] .mkz-c__content{flex:1;overflow:hidden;overflow-y:auto}[mkz] .mkz-c__head{display:flex;align-items:center;border-bottom:1px solid #E0E0E0;padding-top:5px;padding-bottom:5px;border-radius:6px 6px 0 0;min-height:60px;box-sizing:border-box}[mkz] .mkz-c__head-state{flex:0;padding-right:12px}[mkz] .mkz-c__head-m{flex:1}[mkz] .mkz-c__head-action{flex:0;padding-left:12px}[mkz] .mkz-c__copy{position:absolute;left:0;bottom:0;right:0;text-align:center;font-size:11px;line-height:24px;display:block;color:#787878;text-decoration:none;text-shadow:0 0 1px #fff}[mkz] .mkz-c__copy:hover{text-decoration:none}[mkz] .mkz-c__m-assign-text,[mkz] .mkz-c__m-unassign-text{font-weight:600;font-size:14px;line-height:1.2em}[mkz] .mkz-c__m-assign-post{font-size:11px;line-height:1.2em}[mkz] .mkz-c__m-assign-text,[mkz] .mkz-c__m-assign-post,[mkz] .mkz-c__m-assign-avatar{display:none}[mkz] .mkz-c__m-assign-avatar{width:40px;height:40px;border-radius:50%}[mkz] .mkz-c__close{cursor:pointer;padding:10px;margin:0 -10px;opacity:0.7;transition:all linear 0.2s}[mkz] .mkz-c__close:hover{opacity:1}[mkz] .mkz-c__state-wrap{position:relative;min-width:10px;min-height:10px}[mkz] .mkz-c__state{position:absolute;right:0;bottom:0;width:10px;height:10px;border-radius:50%;background-color:red;transition:background 0.5s linear;box-shadow:0 0 1px 1px #fff}[mkz] .mkz-c__footer{border-top:1px solid #E0E0E0;display:flex;align-items:center;padding-top:20px;padding-bottom:20px;background-color:#fff;border-radius:0 0 6px 6px}[mkz] .mkz-c__footer-msg{flex:1}[mkz] .mkz-c__footer-btn{flex:0;display:none}[mkz] .mkz-c__input{display:block;width:100%;resize:none;padding:0;font-size:13px;line-height:1.2em;font-family:Geneva,Arial,Helvetica,sans-serif;color:#000;border-style:none;outline-style:none;background-color:transparent;overflow:hidden;max-height:50vh;min-height:18px;height:0}[mkz] .mkz-c__btn{color:#7261FF;cursor:pointer}[mkz] .mkz-c__btn-unread{background-color:red;width:16px;height:16px;font-size:8px;line-height:16px;text-align:center;color:#fff;overflow:hidden;position:absolute;right:-5px;top:-5px;border-radius:50%;box-shadow:0 0 1px 2px #fff}[mkz] .mkz-c__list{padding:20px 0}[mkz] .mkz-c__i{display:flex;margin:20px 0}[mkz] .mkz-c__i-avatar{flex:0 0 24px;margin:0 5px 0 0}[mkz] .mkz-c__i_type_client{flex-direction:row-reverse}[mkz] .mkz-c__i_type_client .mkz-c__i-avatar{display:none;background-color:#E7FEEA}[mkz] .mkz-c__i_type_client .mkz-c__i-msg{background-color:#fff;border-radius:6px 6px 0 6px}[mkz] .mkz-c__i-content{max-width:100%;display:flex;flex-direction:column;align-items:flex-start}[mkz] .mkz-c__i-content a{color:inherit;text-decoration:underline}[mkz] .mkz-c__i-content a:hover{color:inherit;text-decoration:none}[mkz] .mkz-c__i-avatar-img{width:24px;height:24px;border-radius:50%}[mkz] .mkz-c__i-msg{text-align:left;background-color:#E7FEEA;border-radius:6px 6px 6px 0;padding:8px 15px;box-shadow:0px 0px 4px rgba(0,0,0,0.12),0px 0px 1px rgba(0,0,0,0.48);font-size:13px;line-height:1.5em}[mkz] .mkz-c__i-msg:not(:last-child){margin-bottom:15px}[mkz] .mkz-c__i-msg-overflow{overflow:hidden;text-overflow:ellipsis;padding:0 1px;margin:0 -1px}[mkz] .mkz-c-o__i{width:230px}[mkz] .mkz-c-o__i:not(:last-child){margin-bottom:20px}[mkz] .mkz-c-o__content{padding:20px;border:1px solid #E0E0E0;border-radius:6px}[mkz] .mkz-c-o__preview-link{display:flex;align-items:center;justify-content:center;height:104px;margin-bottom:10px}[mkz] .mkz-c-o__preview-img{display:block;max-width:100%;max-height:100%;color:#787878}[mkz] .mkz-c-o__name{font-size:13px;line-height:18px;margin-bottom:10px}[mkz] .mkz-c-o__name-link{color:#000;text-decoration:none;cursor:pointer}[mkz] .mkz-c-o__name-link:hover{text-decoration:underline}[mkz] .mkz-c-o__info{display:flex;align-items:baseline;margin-bottom:15px}[mkz] .mkz-c-o__info-price,[mkz] .mkz-c-o__info-avaliable{flex:1}[mkz] .mkz-c-o__info-price{font-weight:600;font-size:16px;line-height:1.2em;padding-right:10px}[mkz] .mkz-c-o__info-avaliable{text-align:right;font-size:12px;line-height:1.2em;white-space:nowrap}[mkz] .mkz-c-o__info-avaliable_color_green{color:#37833B}[mkz] .mkz-c-o__info-avaliable_color_red{color:#FC4566}[mkz] .mkz-c-o__btn{font-weight:600;font-size:13px;line-height:1.2em;color:#fff;background-color:#FF6575;border-radius:99px;padding:8px 15px;text-align:center;display:block;outline-style:none;text-decoration:none;cursor:pointer}[mkz] .mkz-c-o__btn[disabled],[mkz] .mkz-c-o__btn[disabled]:hover{background-color:#DF4555;cursor:default}[mkz] .mkz-c-o__btn:hover{text-decoration:none;background-color:#EF5565}[mkz] .mkz-c-o__counter{font-size:10px;line-height:18px;padding:3px 10px;color:#787878}[mkz] .mkz-c-docs{margin:10px -3px;overflow:hidden}[mkz] .mkz-c-docs__list{display:flex}[mkz] .mkz-c-docs__i{flex:1;padding:0 3px;box-sizing:border-box}[mkz] .mkz-c-docs__btn{cursor:pointer;font-size:11px;line-height:1.2em;color:#000;background-color:#F0F0F1;border:1px solid #E0E0E0;border-radius:10px;text-align:center;padding:4px 15px;display:block;width:100%;box-sizing:border-box;white-space:nowrap}[mkz] .mkz-c-docs__btn:hover{background-color:#E0E0E1}[mkz] .mkz-f{width:230px;margin:0;padding:5px 0}[mkz] .mkz-f__row:not(:last-child){margin-bottom:10px}[mkz] .mkz-f__label{display:block;font-size:14px;line-height:1.2em;margin-bottom:4px}[mkz] .mkz-f__input,[mkz] .mkz-f__select{display:block;width:100%;box-sizing:border-box;resize:none;padding:0 0 0 10px;font-size:13px;line-height:30px;font-family:Geneva,Arial,Helvetica,sans-serif;color:#000;outline-style:none;background-color:#fff;border-radius:6px;border:1px solid #CBCBCB;overflow:hidden}[mkz] .mkz-f__input[disabled],[mkz] .mkz-f__select[disabled]{color:#777;background-color:#eee}[mkz] .mkz-f__select{appearance:none;-moz-appearance:none;-webkit-appearance:none;position:relative;background-image:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='50' fill='%23000000'><polygon points='0,0 100,0 50,50'/></svg>\");background-repeat:no-repeat;background-position:calc(100% - 10px) center;background-size:10px}[mkz] .mkz-f__note{font-size:9px;line-height:1.2em;text-align:center}[mkz] .mkz-f__btn{display:block;width:100%;box-sizing:border-box;font-weight:600;font-size:13px;line-height:1.2em;color:#fff;background-color:#7261FF;border-radius:6px;border-style:none;padding:8px 15px;text-align:center;outline-style:none;text-decoration:none;cursor:pointer;text-transform:uppercase}[mkz] .mkz-f__btn[disabled],[mkz] .mkz-f__btn[disabled]:hover{background-color:#6251EF;color:#aaa;cursor:default}[mkz] .mkz-f__btn:hover{text-decoration:none;background-color:#6251EF}[mkz] .mkz-f__invalid,[mkz] .mkz-f__invalid::placeholder{color:red !important;box-shadow:0 0 1px 1px red !important}.mkz-c-mobile.mkz-c-fixed{position:fixed !important;height:100% !important;width:100% !important;max-width:100% !important;overflow-x:hidden !important}.mkz-c-mobile.mkz-c-fixed body{z-index:auto !important;zoom:1 !important;max-width:100% !important;overflow-x:hidden !important}.mkz-c-mobile [mkz] .mkz-c__chat{max-height:none;max-width:none;width:auto;height:auto;right:0;left:0;top:0;bottom:0}.mkz-c-mobile [mkz] .mkz-c__cart,.mkz-c-mobile [mkz] .mkz-c__chat_position_left .mkz-c__cart{right:0;left:0;top:0;bottom:0;border-style:none}.mkz-c-mobile [mkz] .mkz-c__cart,.mkz-c-mobile [mkz] .mkz-c__head,.mkz-c-mobile [mkz] .mkz-c__footer{border-radius:0}.mkz-c-mobile [mkz] .mkz-c__footer-btn{display:block}.mkz-c-mobile [mkz] .mkz-c__copy{display:none}@keyframes mkzBounceMdScale{94%{transform:scale(1)}98%{transform:scale(1.1)}100%{transform:scale(1)}}@keyframes mkzBounceSmScale{94%{transform:scale(1)}98%{transform:scale(1.05)}100%{transform:scale(1)}}\n"},function(e,t){e.exports={removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},appendHTML:function(e,t){var n=document.createElement("div");n.innerHTML=t;var i=this.getFirstChild(n);return e.appendChild(i),i},beforeHTML:function(e,t){var n=document.createElement("div");n.innerHTML=t;var i=this.getFirstChild(n);return e.parentNode.insertBefore(i,e),i},getFirstChild:function(e){for(var t=e.firstChild;null!=t&&3==t.nodeType;)t=t.nextSibling;return t},htmlToText:function(e){var t=document.createElement("div");return t.textContent=e||"",t.innerHTML},srcset:function(e){var t=function(e,t){var n=e.split("/"),i=n.length-1;return n[i]="x".concat(t,"_").concat(n[i]),"".concat(n.join("/")," ").concat(t,"x")};return"".concat(t(e,2),", ").concat(t(e,3))},linkify:function(e){getAttrs=function(e){var t=window.location.host.replace(/^www\./i,"").replace(/:[0-9]+/i,"");return e.indexOf(t)>-1?"":' target="_blank"'};return e=(e=(e=e.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,(function(e,t){return'<a href="'.concat(t,'"').concat(getAttrs(t),">").concat(t,"</a>")}))).replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,(function(e,t,n){return"".concat(t,'<a href="http://').concat(n,'"').concat(getAttrs(n),">").concat(n,"</a>")}))).replace(/(([a-zA-Z_-]+\.)*[a-zA-Z_-]+@([a-zA-Z_-]+\.)*[a-zA-Z_-]+\.[a-zA-Z]{2,6})/gim,'<a href="mailto:$1">$1</a>')},br:function(e){return(e||"").split("\n").join("<br />")},htmlFormatting:function(e){return this.linkify(this.br(e))},textFormatting:function(e){return this.htmlFormatting(this.htmlToText(e))},getUrlParameter:function(e){if(regex=new RegExp("[?&]"+e+"=([^&#]*)"),results=regex.exec(location.search),null!==results)return decodeURIComponent(results[1].replace(/\+/g," "))}}},function(e,t,n){function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s,r=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){a=!0,s=e},f:function(){try{r||null==i.return||i.return()}finally{if(a)throw s}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var s=n(10).Socket,r=n(3),a=n(5),c=n(12).default,l=n(4),h=n(21),d=n(22).default;e.exports={version:"1.3.21",airbrakeProject:254408,airbrakeApiKey:"84e2f7b3f257c5fffb9edf2d951f2054",store:{},libs:{},previewMode:!1,isMobile:!1,create:function(e,t){var n=this;this.libs.notifierInstance?this.notifier=this.libs.notifierInstance(this.version,this.airbrakeProject,this.airbrakeApiKey,"production"):this.notifier=this.libs.notifier,this.notifier.call((function(){n.settings=t,n.locale=e,n.log("chat","created"),n.view=new c(n),n.sound=new d(n.settings.appearance.client_sound_path),l.init(n),n.libs.eEmit.subscribe("plugin.chat.show",n.view.showChat.bind(n.view)),n.libs.eEmit.subscribe("plugin.chat.hide",n.view.hideChat.bind(n.view)),n.createConnection(),n.isMobile=n.libs.helpers.isMobile()}))},destroy:function(){this.view&&this.view.destroy(),this.socket&&this.socket.disconnect()},preview:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.previewMode=!0,this.isMobile=Boolean(n.isMobile),this.settings=t,this.locale=e,this.view=new c(this),this.view.history=n.history||[],this.view.width=n.width||null,this.view.render(),n.collapsed?this.view.showNotice():this.view.showChat(),n.currentAgent&&(this.currentAgent=n.currentAgent,this.view.assignAgent(),this.updateAgentState())},currentAgent:null,agents:[],agentIsOnline:!1,sessionsCount:0,settings:{},locale:null,log:function(){var e;this.libs.log&&(e=this.libs.log).push.apply(e,["chat"].concat(Array.prototype.slice.call(arguments)))},createConnection:function(){var e=this;this.notifier.call((function(){e.socket=new s("".concat(e.store.chatProtocol||"wss://").concat(e.store.chatEndpoint,"/socket")),e.socket.onOpen(e.handlerConnected.bind(e)),e.socket.onClose(e.handlerDisconnected.bind(e)),e.socket.connect(),e.servicChannel=e.socket.channel("chat-client:".concat(e.store.appKey)),e.servicChannel.join().receive("ok",e.handlerJoined.bind(e)).receive("error",(function(){return e.handlerFailJoined.bind(e,e.servicChannel.topic)})),e.servicChannel.on("agent:entered",e.handlerAgentStatus.bind(e,!0)),e.servicChannel.on("agent:exited",e.handlerAgentStatus.bind(e,!1)),e.clientChannel=e.socket.channel("room:".concat(e.store.appKey,":").concat(e.store.uid)),e.clientChannel.join().receive("ok",e.handlerJoined.bind(e)).receive("error",e.handlerFailJoined.bind(e,e.clientChannel.topic)),e.clientChannel.on("client:entered",e.handlerClientEntered.bind(e)),e.clientChannel.on("message:new",e.handlerMsg.bind(e)),e.clientChannel.on("message:resend",e.handlerMsgResend.bind(e)),e.clientChannel.on("agent:assign",e.handlerAgentAssign.bind(e)),e.clientChannel.on("survey:show",e.handlerSurveyShow.bind(e)),e.clientChannel.on("event:survey_submitted",e.handlerSurveySubmitted.bind(e))}))},handlerConnected:function(){var e=this;this.notifier.call((function(){e.view.connected()}))},handlerDisconnected:function(){var e=this;this.notifier.call((function(){e.view.disconnected()}))},handlerJoined:function(){var e=this;this.notifier.call((function(){e.view.render(),e.view.scrollBottom(),e.view.enableSending(),e.log("chat","joined")}))},handlerFailJoined:function(e){var t=new Error("Cannot join channel ".concat(e));this.notifier.notify(t)},handlerAgentStatus:function(e,t){var n=this,i=t.agent_id;this.notifier.call((function(){var t=n.getAgent(i);t&&(t.isOnline=e,n.updateAgentState())}))},handlerClientEntered:function(e){var t=this;this.notifier.call((function(){t.setAgents(e.agents),t.sessionsCount=e.sessionsCount,t.setCurrentAgent(e.current_agent_id),t.updateAgentState(),t.libs.eEmit&&t.libs.eEmit.emit("plugin.chat.channel.entered"),t.log("chat","ClientEntered",e)}))},handlerSurveyShow:function(e){var t=this;this.notifier.call((function(){t.view.windowFocus&&h.trackShow(e.custom_fields.uid),t.handlerMsg(e)}))},handlerMsg:function(e){var t=this;this.notifier.call((function(){e=t.addMsg(e),t.stateChangeMsg(e),t.view.scrollBottom(),t.log("chat","Msg",e)}))},handlerMsgResend:function(e){var t=this;this.notifier.call((function(){e=t.addMsg(e),t.stateChangeMsg(e),t.view.scrollBottom(),t.setCurrentAgent(e.current_agent_id),t.log("chat","Resend",e)}))},handlerAgentAssign:function(e){var t=this;this.notifier.call((function(){t.setCurrentAgent(e.target_agent_id)}))},handlerCollapse:function(e){var t=this;this.notifier.call((function(){if(!0!==e){var n,o=a.getList(),s=i(o);try{for(s.s();!(n=s.n()).done;){var r=n.value;t.pusherMsgState(r,"read")}}catch(e){s.e(e)}finally{s.f()}o.length>0&&(a.resetList(),t.view.renderUnread())}}))},handlerSurveySubmitted:function(e){var t=this;this.notifier.call((function(){var n=r.findMsg(e.custom_fields.muid);n&&(n.custom_fields.submitted=!0,r.addMsg(n),t.view.renderMessage(n),r.batchUpdateMsg((function(e){return e.muid!==n.muid&&"survey:show"===e.msg_type&&e.custom_fields.uid===n.custom_fields.uid}),(function(e){return e.custom_fields.hidden=!0})).map((function(e){return t.view.renderMessage(e)})))}))},pusherTyping:function(e){if(e)return this.clientChannel.push("client:activity",{type:"typing",text:e})},pusherNewMsg:function(e){if(e){var t=+new Date,n=this.store.uid,i={muid:"".concat(n,":c:").concat(t),text:e,status:"sent",sent_at:this.getDateTime()},o=r.getHistory(),s=o.length>0&&o[o.length-1];return s&&"message:auto"===s.msg_type&&(i.prev_auto_message={auto_message_uid:s.auto_message_uid,muid:s.muid,agent_id:0,text:s.text,sender_type:"auto",status:"read",sent_at:s.sent_at,device_uid:n},l.trackReply(s.muid)),this.clientChannel.push("message:new",i)}},pusherMsgState:function(e,t){e&&this.clientChannel.push("message:status:change",{muid:e,new_status:t,sent_at:this.getDateTime()})},pusherNewSurveyMsg:function(e,t){var n=r.findMsg(e);n&&(this.clientChannel.push("survey:submit",{muid:e,title:n.custom_fields.title}),h.trackSubmit(n.custom_fields.uid,t))},getDateTime:function(){return(new Date).toISOString().replace("Z","000Z")},stateChangeMsg:function(e){null!==e.agent_id&&(!1===this.view.collapsed?this.pusherMsgState(e.muid,"read"):(this.pusherMsgState(e.muid,"delivered"),a.addItem(e.muid),this.view.renderUnread()))},addMsg:function(e){if("auto"===e.sender_type&&(e.agent_id=l.getMsgAgentId(e.muid),l.removeItem(e)),null!==e.agent_id){var t=this.getAgent(e.agent_id);t&&(e.sender_avatar_url=t.avatar_url||t.sender_avatar_url,e.sender_name=t.name||e.sender_name),this.view.windowFocus&&!this.view.collapsed||this.sound.play(),!0===this.view.collapsed&&this.view.showBeacon(!0)}r.addMsg(e);var n=r.getNextMsg(e.muid);return this.view.renderMessage(e,n),e},setCurrentAgent:function(e){(e||this.currentAgent)&&(this.currentAgent=this.getAgent(e),this.currentAgent?this.view.assignAgent():this.view.unassignAgent())},setAgents:function(e){this.agents=e.reduce((function(e,t){return e[t.id]=t,e}),{})},getAgent:function(e){return this.agents[e]||null},updateAgentState:function(){this.currentAgent?this.agentIsOnline=this.currentAgent.isOnline:this.agentIsOnline=Object.values(this.agents).find((function(e){return e.isOnline}))&&!0,this.view.renderAgentState()}}},function(e,t,n){"use strict";n.r(t);var i=n(8);mkz("initPlugin","chat",n.n(i).a)},function(e,t,n){"use strict";n.r(t),n.d(t,"Channel",(function(){return C})),n.d(t,"Serializer",(function(){return S})),n.d(t,"Socket",(function(){return E})),n.d(t,"LongPoll",(function(){return A})),n.d(t,"Ajax",(function(){return T})),n.d(t,"Presence",(function(){return M}));const i="undefined"!=typeof self?self:null,o="undefined"!=typeof window?window:null,s=i||o||void 0,r=0,a=1,c=2,l=3,h="closed",d="errored",m="joined",u="joining",_="leaving",p="phx_close",f="phx_error",k="phx_join",g="phx_reply",b="phx_leave",z=[p,f,k,g,b],v="longpoll",y="websocket";let x=e=>{if("function"==typeof e)return e;return function(){return e}};class w{constructor(e,t,n,i){this.channel=e,this.event=t,this.payload=n||function(){return{}},this.receivedResp=null,this.timeout=i,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:t,ref:n}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}class C{constructor(e,t,n){this.state=h,this.topic=e,this.params=x(t||{}),this.socket=n,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new w(this,k,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new j(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=m,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=d,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=h,this.socket.remove(this)}),this.onError(e=>{this.socket.hasLogger()&&this.socket.log("channel","error "+this.topic,e),this.isJoining()&&this.joinPush.reset(),this.state=d,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new w(this,b,x({}),this.timeout).send(),this.state=d,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(g,(e,t)=>{this.trigger(this.replyEventName(t),e)})}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(p,e)}onError(e){return this.on(f,t=>e(t))}on(e,t){let n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}off(e,t){this.bindings=this.bindings.filter(n=>!(n.event===e&&(void 0===t||t===n.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,n=this.timeout){if(!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let i=new w(this,e,(function(){return t}),n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=_;let t=()=>{this.socket.hasLogger()&&this.socket.log("channel","leave "+this.topic),this.trigger(p,"leave")},n=new w(this,b,x({}),e);return n.receive("ok",()=>t()).receive("timeout",()=>t()),n.send(),this.canPush()||n.trigger("ok",{}),n}onMessage(e,t,n){return t}isLifecycleEvent(e){return z.indexOf(e)>=0}isMember(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),!1))}joinRef(){return this.joinPush.ref}sendJoin(e){this.state=u,this.joinPush.resend(e)}rejoin(e=this.timeout){this.isLeaving()||this.sendJoin(e)}trigger(e,t,n,i){let o=this.onMessage(e,t,n,i);if(t&&!o)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");for(let t=0;t<this.bindings.length;t++){const s=this.bindings[t];s.event===e&&s.callback(o,n,i||this.joinRef())}}replyEventName(e){return"chan_reply_"+e}isClosed(){return this.state===h}isErrored(){return this.state===d}isJoined(){return this.state===m}isJoining(){return this.state===u}isLeaving(){return this.state===_}}let S={encode(e,t){let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))},decode(e,t){let[n,i,o,s,r]=JSON.parse(e);return t({join_ref:n,ref:i,topic:o,event:s,payload:r})}};class E{constructor(e,t={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=t.timeout||1e4,this.transport=t.transport||s.WebSocket||A,this.defaultEncoder=S.encode,this.defaultDecoder=S.decode,this.closeWasClean=!1,this.unloaded=!1,this.binaryType=t.binaryType||"arraybuffer",this.transport!==A?(this.encode=t.encode||this.defaultEncoder,this.decode=t.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),o&&o.addEventListener&&o.addEventListener("beforeunload",e=>{this.conn&&(this.unloaded=!0,this.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=t.heartbeatIntervalMs||3e4,this.rejoinAfterMs=e=>t.rejoinAfterMs?t.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4,this.reconnectAfterMs=e=>this.unloaded?100:t.reconnectAfterMs?t.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3,this.logger=t.logger||null,this.longpollerTimeout=t.longpollerTimeout||2e4,this.params=x(t.params||{}),this.endPoint=`${e}/${y}`,this.vsn=t.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new j(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=T.appendParams(T.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=x(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=e=>this.onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this.onConnClose(e))}log(e,t,n){this.logger(e,t,n)}hasLogger(){return null!==this.logger}onOpen(e){let t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}onClose(e){let t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}onError(e){let t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}onMessage(e){let t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}onConnOpen(){this.hasLogger()&&this.log("transport","connected to "+this.endPointURL()),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,e])=>e())}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(e,t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n||""):this.conn.close(),this.conn=null),e&&e()}onConnClose(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,t])=>t(e))}onConnError(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(([,t])=>t(e))}triggerChanError(){this.channels.forEach(e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(f)})}connectionState(){switch(this.conn&&this.conn.readyState){case r:return"connecting";case a:return"open";case c:return"closing";default:return"closed"}}isConnected(){return"open"===this.connectionState()}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}off(e){for(let t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(([t])=>!e.includes(t))}channel(e,t={}){let n=new C(e,t,this);return this.channels.push(n),n}push(e){if(this.hasLogger()){let{topic:t,event:n,payload:i,ref:o,join_ref:s}=e;this.log("push",`${t} ${n} (${s}, ${o})`,i)}this.isConnected()?this.encode(e,e=>this.conn.send(e)):this.sendBuffer.push(()=>this.encode(e,e=>this.conn.send(e)))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}abnormalClose(e){this.closeWasClean=!1,this.conn.close(1e3,e)}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:i,ref:o,join_ref:s}=e;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.hasLogger()&&this.log("receive",`${i.status||""} ${t} ${n} ${o&&"("+o+")"||""}`,i);for(let e=0;e<this.channels.length;e++){const r=this.channels[e];r.isMember(t,n,i,s)&&r.trigger(n,i,o,s)}for(let t=0;t<this.stateChangeCallbacks.message.length;t++){let[,n]=this.stateChangeCallbacks.message[t];n(e)}})}}class A{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=r,this.poll()}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+y),"$1/"+v)}endpointURL(){return T.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(){this.close(),this.readyState=r}ontimeout(){this.onerror("timeout"),this.closeAndRetry()}poll(){this.readyState!==a&&this.readyState!==r||T.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),e=>{if(e){var{status:t,token:n,messages:i}=e;this.token=n}else var t=0;switch(t){case 200:i.forEach(e=>this.onmessage({data:e})),this.poll();break;case 204:this.poll();break;case 410:this.readyState=a,this.onopen(),this.poll();break;case 0:case 500:this.onerror(),this.closeAndRetry();break;default:throw new Error("unhandled poll status "+t)}})}send(e){T.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),e=>{e&&200===e.status||(this.onerror(e&&e.status),this.closeAndRetry())})}close(e,t){this.readyState=l,this.onclose()}}class T{static request(e,t,n,i,o,r,a){if(s.XDomainRequest){let n=new XDomainRequest;this.xdomainRequest(n,e,t,i,o,r,a)}else{let c=s.XMLHttpRequest?new s.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.xhrRequest(c,e,t,n,i,o,r,a)}}static xdomainRequest(e,t,n,i,o,s,r){e.timeout=o,e.open(t,n),e.onload=()=>{let t=this.parseJSON(e.responseText);r&&r(t)},s&&(e.ontimeout=s),e.onprogress=()=>{},e.send(i)}static xhrRequest(e,t,n,i,o,s,r,a){e.open(t,n,!0),e.timeout=s,e.setRequestHeader("Content-Type",i),e.onerror=()=>{a&&a(null)},e.onreadystatechange=()=>{if(e.readyState===this.states.complete&&a){let t=this.parseJSON(e.responseText);a(t)}},r&&(e.ontimeout=r),e.send(o)}static parseJSON(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,t){let n=[];for(var i in e){if(!e.hasOwnProperty(i))continue;let o=t?`${t}[${i}]`:i,s=e[i];"object"==typeof s?n.push(this.serialize(s,o)):n.push(encodeURIComponent(o)+"="+encodeURIComponent(s))}return n.join("&")}static appendParams(e,t){if(0===Object.keys(t).length)return e;let n=e.match(/\?/)?"&":"?";return`${e}${n}${this.serialize(t)}`}}T.states={complete:4};class M{constructor(e,t={}){let n=t.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=e,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(n.state,e=>{let{onJoin:t,onLeave:n,onSync:i}=this.caller;this.joinRef=this.channel.joinRef(),this.state=M.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=M.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],i()}),this.channel.on(n.diff,e=>{let{onJoin:t,onLeave:n,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=M.syncDiff(this.state,e,t,n),i())})}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}list(e){return M.list(this.state,e)}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}static syncState(e,t,n,i){let o=this.clone(e),s={},r={};return this.map(o,(e,n)=>{t[e]||(r[e]=n)}),this.map(t,(e,t)=>{let n=o[e];if(n){let i=t.metas.map(e=>e.phx_ref),o=n.metas.map(e=>e.phx_ref),a=t.metas.filter(e=>o.indexOf(e.phx_ref)<0),c=n.metas.filter(e=>i.indexOf(e.phx_ref)<0);a.length>0&&(s[e]=t,s[e].metas=a),c.length>0&&(r[e]=this.clone(n),r[e].metas=c)}else s[e]=t}),this.syncDiff(o,{joins:s,leaves:r},n,i)}static syncDiff(e,{joins:t,leaves:n},i,o){let s=this.clone(e);return i||(i=function(){}),o||(o=function(){}),this.map(t,(e,t)=>{let n=s[e];if(s[e]=t,n){let t=s[e].metas.map(e=>e.phx_ref),i=n.metas.filter(e=>t.indexOf(e.phx_ref)<0);s[e].metas.unshift(...i)}i(e,n,t)}),this.map(n,(e,t)=>{let n=s[e];if(!n)return;let i=t.metas.map(e=>e.phx_ref);n.metas=n.metas.filter(e=>i.indexOf(e.phx_ref)<0),o(e,n,t),0===n.metas.length&&delete s[e]}),s}static list(e,t){return t||(t=function(e,t){return t}),this.map(e,(e,n)=>t(e,n))}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static clone(e){return JSON.parse(JSON.stringify(e))}}class j{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}},function(e,t){function n(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s,r=!0,a=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){a=!0,s=e},f:function(){try{r||null==o.return||o.return()}finally{if(a)throw s}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}e.exports={name:"mkz_c_auto_msg_history",addItems:function(e){var t,i=this.getItems(),o=n(e);try{var s=function(){var e=t.value,n=i.findIndex((function(t){return t.payload.custom_fields.uid===e.payload.custom_fields.uid}));-1===n?i.push(e):i[n].payload.custom_fields=e.payload.custom_fields};for(o.s();!(t=o.n()).done;)s()}catch(e){o.e(e)}finally{o.f()}return this.setItems(i),i},getItems:function(){var e=sessionStorage.getItem(this.name),t=[];try{t=JSON.parse(e)||[]}catch(e){}return t},setItems:function(e){return sessionStorage.setItem(this.name,JSON.stringify(e)),e},removeItem:function(e){var t=this.getItems(),n=t.findIndex((function(t){return t.payload.muid===e}));return-1!==n&&(t.splice(n,1),this.setItems(t)),t}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return View}));var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,s=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){r=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(r)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var css=__webpack_require__(6),msgDelivered=__webpack_require__(5),helpers=__webpack_require__(7),domEvent=__webpack_require__(18),Template=__webpack_require__(19).default,msgStory=__webpack_require__(3),View=function(){function View(e){_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,View),this.history=null,this.collapsed="true"!==helpers.getUrlParameter("mkz_expand_chat"),this.oldCollapsed=!0,this.windowFocus=!0,this.app=e,this.previewMode=e.previewMode,this.libs=e.libs,this.allowSending=!1,this.typingTimeout=1e3,this.noticeShowTimeout=1e3,this.noticeHideTimeout=1e4,this.width=null,this.template=new Template(this),this.containerBeaconClassName="mkz-c_beacon_show",this.containerChatClassName="mkz-c_chat_show",this.htmlClassName="mkz-c-fixed",this.mobileClassName="mkz-c-mobile",this.validationOptions={invalidClassName:"mkz-f__invalid",invalidParentClassName:"mkz-f__invalid-wrap"}}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(View,[{key:"destroy",value:function(){this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},{key:"bind",value:function(){var e=this;domEvent.add(this.elInput,"keyup",this.setMsgHeight.bind(this)),domEvent.add(this.elToggle,"click",this.showChat.bind(this)),domEvent.add(this.elClose,"click",this.hideChat.bind(this)),this.previewMode||(domEvent.add(window,"focus",this.onFocus.bind(this)),domEvent.add(window,"blur",this.onBlur.bind(this)),domEvent.add(window,"resize",this.setZoom.bind(this)),domEvent.add(this.elSubmit,"click",this.sendMsg.bind(this)),domEvent.add(this.elInput,"keydown",(function(t){13!=t.keyCode||t.shiftKey?e.startTyping():(t.preventDefault(),e.sendMsg())})))}},{key:"bindMessage",value:function(e){if(!this.previewMode){var t,n=_createForOfIteratorHelper(e.querySelectorAll(".mkz-c-o-js-action"));try{for(n.s();!(t=n.n()).done;){var i=t.value;domEvent.add(i,"click",this.clickProductAttachment.bind(this))}}catch(e){n.e(e)}finally{n.f()}var o,s=_createForOfIteratorHelper(e.querySelectorAll(".mkz-f-js"));try{for(s.s();!(o=s.n()).done;){var r=o.value;domEvent.add(r,"submit",this.submitSurveyForm.bind(this))}}catch(e){s.e(e)}finally{s.f()}}}},{key:"setZoom",value:function(){if(window.self===window.top){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.outerWidth||document.documentElement.outerWidth||document.body.outerWidth;this.elContainer.style.zoom=e/t}}},{key:"submitSurveyForm",value:function(e){e.preventDefault();var t=e.target,n=new this.libs.Validation(t,this.validationOptions).valid(),i=t.dataset.uid;if(n){var o=new this.libs.FormToObject(t),s=msgStory.findMsg(i);if(s&&s.custom_fields){var r=s.custom_fields.elements;o=Object.entries(o).reduce((function(e,t){var n=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(t,2),i=n[0],o=n[1];e[i]=o;var s=r.find((function(e){return e.field===i}));if(s)switch(s.display_type){case"boolean":"true"===o&&(e[i]=!0),"false"===o&&(e[i]=!1);break;case"numeric":""!==o&&(e[i]=parseFloat(o));break;case"integer":""!==o&&(e[i]=parseInt(o))}return e}),{})}o=Object.entries(o).reduce((function(e,t){var n=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(t,2),i=n[0],o=n[1];return 0===i.indexOf("properties.")?(e.properties=e.properties||{},e.properties[i.replace("properties.","")]=o):e[i]=o,e}),{}),this.app.pusherNewSurveyMsg(i,o),t.querySelector("button").disabled=!0}}},{key:"clickProductAttachment",value:function clickProductAttachment(e){var el=e.target,offer=JSON.parse(el.dataset.data),callbackLabel=el.dataset.callback_label,settings=this.app.settings.behavior.attachment_cta.product,callback=function callback(){callbackLabel&&(el.innerHTML=callbackLabel),settings.callback&&eval(settings.callback)(offer)};el.handlerDone||(el.handlerDone=!0,el.setAttribute("disabled",!0),eval(settings.handler)(offer,callback))}},{key:"onFocus",value:function(){this.windowFocus=!0}},{key:"onBlur",value:function(){this.windowFocus=!1}},{key:"showChat",value:function(){this.collapsed=!1,this.renderChatToggle()}},{key:"hideChat",value:function(){this.collapsed=!0,this.renderChatToggle()}},{key:"renderChatToggle",value:function(){var e=this;this.collapsed!==this.oldCollapsed&&(this.oldCollapsed=this.collapsed,this.collapsed?(helpers.removeClass(document.documentElement,this.htmlClassName),helpers.removeClass(this.elContainer,this.containerChatClassName),this.showBeacon()):(helpers.addClass(document.documentElement,this.htmlClassName),helpers.addClass(this.elContainer,this.containerChatClassName),this.hideBeacon()),this.previewMode||(this.app.handlerCollapse(this.collapsed),this.collapsed||setTimeout((function(){e.elInput.focus()}),100)))}},{key:"showBeacon",value:function(e){"disabled"!==this.app.settings.beaconState&&("hidden"!==this.app.settings.beaconState||e)&&helpers.addClass(this.elContainer,this.containerBeaconClassName)}},{key:"hideBeacon",value:function(){helpers.removeClass(this.elContainer,this.containerBeaconClassName)}},{key:"connected",value:function(){this.enableSending()}},{key:"disconnected",value:function(){this.disableSending()}},{key:"startTyping",value:function(){var e=this;this.timeoutTyping||(this.timeoutTyping=setTimeout((function(){e.sendTyping(),e.stopTyping()}),this.typingTimeout))}},{key:"stopTyping",value:function(){clearTimeout(this.timeoutTyping),this.timeoutTyping=null}},{key:"sendTyping",value:function(){var e=this.elInput.value;this.app.pusherTyping(e)}},{key:"sendMsg",value:function(){var e=this;if(this.allowSending){var t=this.elInput.value.trim();t&&(this.stopTyping(),this.disableSending(),this.app.pusherNewMsg(t).receive("ok",(function(){e.elInput.value=null,e.setMsgHeight(),e.enableSending()})).receive("error",(function(){return e.enableSending.bind(e)})).receive("timeout",(function(){return e.enableSending.bind(e)})))}}},{key:"setMsgHeight",value:function(){this.elInput.style.height="auto";var e=this.elInput.scrollHeight;this.elInput.style.height=e+"px"}},{key:"disableSending",value:function(){this.allowSending=!1,this.elSubmit&&helpers.addClass(this.elSubmit,"mkz-c__submit_disabled_yes")}},{key:"enableSending",value:function(){this.allowSending=!0,this.elSubmit&&helpers.removeClass(this.elSubmit,"mkz-c__submit_disabled_yes")}},{key:"assignAgent",value:function(){this.elAgentName.innerText=this.app.currentAgent.name||"",this.app.settings.appearance.agent_post&&(this.elAgentPost.innerText=this.app.currentAgent.job_title||""),this.app.settings.appearance.agent_avatar&&this.app.currentAgent.avatar_url?(this.elAgentAvatar.src=this.app.currentAgent.avatar_url,this.elAgentAvatar.setAttribute("srcset",helpers.srcset(this.app.currentAgent.avatar_url)),this.elAgentAvatar.style.display="block"):this.elAgentAvatar.style.display="none",helpers.addClass(this.elContainer,"mkz-c_agent_assign")}},{key:"unassignAgent",value:function(){helpers.removeClass(this.elContainer,"mkz-c_agent_assign")}},{key:"onlineAgents",value:function(){helpers.addClass(this.elContainer,"mkz-c_agent_online")}},{key:"offlineAgents",value:function(){helpers.removeClass(this.elContainer,"mkz-c_agent_online")}},{key:"toggleNotice",value:function(){var e=this;if(!this.previewMode){sessionStorage.getItem("mkz_c_tooltip_hidden")||(sessionStorage.setItem("mkz_c_tooltip_hidden",!0),setTimeout((function(){e.showNotice()}),this.noticeShowTimeout),setTimeout((function(){e.hideNotice()}),this.noticeShowTimeout+this.noticeHideTimeout))}}},{key:"showNotice",value:function(){helpers.addClass(this.elContainer,"mkz-c_tooltip_yes")}},{key:"hideNotice",value:function(){helpers.removeClass(this.elContainer,"mkz-c_tooltip_yes")}},{key:"render",value:function(){this.el||(this.el=helpers.appendHTML(document.body,this.template.content()),this.elContainer=this.el.querySelector(".mkz-c-js"),this.elInput=this.el.querySelector(".mkz-c-js-input"),this.elSubmit=this.el.querySelector(".mkz-c-js-submit"),this.elUnread=this.el.querySelector(".mkz-c-js-unread"),this.elClose=this.el.querySelector(".mkz-c-js-close"),this.elToggle=this.el.querySelector(".mkz-c-js-toggle"),this.elHistory=this.el.querySelector(".mkz-c-js-history"),this.elScroll=this.el.querySelector(".mkz-c-js-scroll"),this.elAgentName=this.el.querySelector(".mkz-c-js-agent-name"),this.elAgentPost=this.el.querySelector(".mkz-c-js-agent-post"),this.elAgentAvatar=this.el.querySelector(".mkz-c-js-agent-avatar"),this.bind(),this.showBeacon(),this.toggleNotice(),this.renderMessages(),this.previewMode||this.setZoom(),this.app.isMobile?helpers.addClass(document.documentElement,this.mobileClassName):helpers.removeClass(document.documentElement,this.mobileClassName)),this.renderChatToggle(),this.renderUnread()}},{key:"renderMessages",value:function(){var e,t=_createForOfIteratorHelper(this.history||msgStory.getHistory());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.renderMessage(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"renderMessage",value:function(e,t){var n=this.template.message(e),i=this.findMsg(e.muid);if(i)i.innerHTML=n;else{var o=t&&this.findMsg(t.muid);i=o?helpers.beforeHTML(o,n):helpers.appendHTML(this.elHistory,n)}this.bindMessage(i)}},{key:"findMsg",value:function(e){return this.elHistory.querySelector('[data-id="'.concat(e,'"]'))}},{key:"renderUnread",value:function(){if(this.elUnread){var e=msgDelivered.getList().length;this.elUnread.innerHTML=e,this.elUnread.style.display=0===e?"none":"block"}}},{key:"renderAgentState",value:function(){this.app.agentIsOnline?this.onlineAgents():this.offlineAgents()}},{key:"scrollBottom",value:function(){var e=this;setTimeout((function(){e.elScroll.scrollTop=e.elScroll.scrollHeight}),0)}}]),View}()},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(o)throw s}}return n}}},function(e,t,n){var i=n(16);e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports={guid:0,fixEvent:function(e){if((e=e||window.event).isFixed)return e;if(e.isFixed=!0,e.preventDefault=e.preventDefault||function(){this.returnValue=!1},e.stopPropagation=e.stopPropagaton||function(){this.cancelBubble=!0},e.target||(e.target=e.srcElement),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement==e.target?e.toElement:e.fromElement),null==e.pageX&&null!=e.clientX){var t=document.documentElement,n=document.body;e.pageX=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t.clientTop||0)}return!e.which&&e.button&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e},commonHandle:function(e,t){e=t.fixEvent(e);var n=this.events[e.type];for(var i in n){if(!1===n[i].call(this,e)&&(e.preventDefault(),e.stopPropagation()),e.stopNow)break}},add:function(e,t,n){var i=this;e.setInterval&&e!=window&&!e.frameElement&&(e=window),n.guid||(n.guid=++this.guid),e.events||(e.events={},e.handle=function(t){return i.commonHandle.call(e,t,i)}),e.events[t]||(e.events[t]={},e.addEventListener?e.addEventListener(t,e.handle,!1):e.attachEvent&&e.attachEvent("on"+t,e.handle)),e.events[t][n.guid]=n},remove:function(e,t,n){var i=e.events&&e.events[t];if(i){for(var o in delete i[n.guid],i)return;for(var o in e.removeEventListener?e.removeEventListener(t,e.handle,!1):e.detachEvent&&e.detachEvent("on"+t,e.handle),delete e.events[t],e.events)return;try{delete e.handle,delete e.events}catch(t){e.removeAttribute("handle"),e.removeAttribute("events")}}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var i=n(0),o=n.n(i),s=n(1),r=n.n(s),a=n(2),c=n.n(a),l=n(6),h=n(7),d=n(20),m=function(){function e(t){r()(this,e),this.app=t.app,this.view=t,this.appearance=this.app.settings.appearance,this.behavior=this.app.settings.behavior}return c()(e,[{key:"safe",value:function(e){return h.htmlToText(e)}},{key:"t",value:function(e){return d[this.app.locale][e]}},{key:"attribute",value:function(e){return e?e.replace(/\"/gi,"&quot;"):""}},{key:"offer",value:function(e,t,n){var i=e.icon?'\n          <img src="'.concat(this.safe(e.icon),'" alt="" class="mkz-c-o__preview-img" />\n    '):'\n          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="480" height="448" viewBox="0 0 480 448" class="mkz-c-o__preview-img">\n            <path fill="currentColor" d="M160 144c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zM416 240v112h-352v-48l80-80 40 40 128-128zM440 64h-400c-4.25 0-8 3.75-8 8v304c0 4.25 3.75 8 8 8h400c4.25 0 8-3.75 8-8v-304c0-4.25-3.75-8-8-8zM480 72v304c0 22-18 40-40 40h-400c-22 0-40-18-40-40v-304c0-22 18-40 40-40h400c22 0 40 18 40 40z"></path>\n          </svg>\n    ',o=n.length<2?"":'\n        <div class="mkz-c-o__counter">\n          '.concat(t+1,"/").concat(n.length,"\n        </dvi>\n    "),s=this.t(this.behavior.attachment_cta.product.callback_label_text),r=this.t(this.behavior.attachment_cta.product.label_text);return'\n      <div class="mkz-c-o__i">\n        <div class="mkz-c-o__content">\n          <a href="'.concat(this.safe(e.url),'" class="mkz-c-o__preview-link">\n            ').concat(i,'\n          </a>\n          <div class="mkz-c-o__name">\n            <a href="').concat(this.safe(e.url),'" class="mkz-c-o__name-link">').concat(this.safe(e.name),'</a>\n          </div>\n          <div class="mkz-c-o__info">\n            <div class="mkz-c-o__info-price">\n              ').concat(this.safe(e.display_price),'\n            </div>\n            <div class="mkz-c-o__info-avaliable mkz-c-o__info-avaliable_color_').concat(e.available?"green":"red",'">\n              ').concat(this.t(e.available?"in_stock":"out_of_stock"),'\n            </div>\n          </div>\n          <div class="mkz-c-o__action">\n            <span\n              data-data="').concat(this.attribute(JSON.stringify(e)),'"\n              data-callback_label="').concat(this.attribute(s),'"\n              class="mkz-c-o__btn mkz-c-o-js-action"\n            >\n              ').concat(r,"\n            </span>\n          </div>\n        </div>\n        ").concat(o,"\n      </div>\n    ")}},{key:"offers",value:function(e){return e?'\n    <div class="mkz-c-o">\n      '.concat(e.map(this.offer.bind(this)).join("\n"),"\n    </div>"):""}},{key:"form",value:function(e,t){var n=this,i=e.map((function(e){switch(e.display_type){case"email":return n.formText(e,"email");case"numeric":return n.formText(e,"text","numeric");case"integer":return n.formText(e,"text","integer");case"boolean":return n.formBoolean(e);case"select":return n.formSelect(e);case"date":return n.formDate(e);case"hint":return n.formHint(e);case"button":return n.formButton(e);default:return n.formText(e,"text")}})).map((function(e){return'<div class="mkz-f__row">'.concat(e,"</div>")})).join("");return'\n      <form class="mkz-f mkz-f-js" data-uid="'.concat(this.attribute(t),'" novalidate autocomplete="off">').concat(i,"</form>")}},{key:"formText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return'\n    <label class="mkz-f__label">'.concat(this.safe(e.display_name),'</label>\n    <input\n      type="').concat(t,'"\n      name="').concat(e.field,'"\n      class="mkz-f__input"\n      value="').concat(this.attribute(e.value),'"\n      ').concat(e.disabled?'disabled="true"':"","\n      ").concat(e.required?"required":"","\n      ").concat(n,"\n    />\n    ")}},{key:"formDate",value:function(e){return'\n    <label class="mkz-f__label">'.concat(this.safe(e.display_name),'</label>\n    <input\n      type="date"\n      name="').concat(e.field,'"\n      class="mkz-f__input"\n      pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}"\n      value="').concat(this.attribute(e.value),'"\n      ').concat(e.disabled?'disabled="true"':"","\n      ").concat(e.required?"required":"","\n    />\n    ")}},{key:"formBoolean",value:function(e){var t=this,n={"":"-",true:this.t("true"),false:this.t("false")},i=Object.entries(n).map((function(n){var i=o()(n,2),s=i[0],r=i[1],a=e.value===String(s)?'selected="selected"':"";return'<option value="'.concat(t.attribute(s),'" ').concat(a,">").concat(t.safe(r),"</option>")})).join("");return'\n    <label class="mkz-f__label">'.concat(this.safe(e.display_name),'</label>\n    <select\n      name="').concat(e.field,'"\n      class="mkz-f__select"\n      ').concat(e.disabled?'disabled="true"':"","\n      ").concat(e.required?"required":"","\n    >").concat(i,"</select>\n    ")}},{key:"formSelect",value:function(e){var t=this,n=[["","-"]].concat(Object.entries(e.predefined_values)).map((function(n){var i=o()(n,2),s=i[0],r=i[1],a=e.value===s?'selected="selected"':"";return'<option value="'.concat(t.attribute(s),'" ').concat(a,">").concat(t.safe(r),"</option>")})).join("");return'\n    <label class="mkz-f__label">'.concat(this.safe(e.display_name),'</label>\n    <select\n      name="').concat(e.field,'"\n      class="mkz-f__select"\n      ').concat(e.disabled?'disabled="true"':"","\n      ").concat(e.required?"required":"","\n    >").concat(n,"</select>\n    ")}},{key:"formHint",value:function(e){return'\n    <div class="mkz-f__note">'.concat(this.safe(e.display_name),"</div>\n    ")}},{key:"formButton",value:function(e){return'\n    <button type="submit" class="mkz-f__btn" '.concat(e.disabled?'disabled="true"':"",">").concat(this.safe(e.display_name),"</button>\n    ")}},{key:"attachments",value:function(e){var t=this,n=(e.attachments||[]).reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{});return Object.entries(n).map((function(e){var n=o()(e,2),i=n[0],s=n[1];switch(i){case"product":return t.offers(s)}}))}},{key:"message",value:function(e){var t=e.sender_avatar_url&&this.app.settings.appearance.agent_avatar?'<div class="mkz-c__i-avatar"><img src="'.concat(this.safe(e.sender_avatar_url),'" srcset="').concat(h.srcset(e.sender_avatar_url),'" class="mkz-c__i-avatar-img" alt="" title="').concat(this.safe(e.sender_name),'" /></div>'):"";return'\n          <div class="mkz-c__i mkz-c__i_type_'.concat("client"===e.sender_type?"client":"agent",'" data-id="').concat(e.muid,'">\n            ').concat(t,'\n            <div class="mkz-c__i-content">\n              ').concat(this.messageContent(e),"\n            </div>\n          </div>")}},{key:"messageContent",value:function(e){var t=this,n="client"===e.sender_type?this.appearance.client_msg_bg:this.appearance.agent_msg_bg,i="client"===e.sender_type?this.appearance.client_msg_color:this.appearance.agent_msg_color,o=function(e){return'\n      <div class="mkz-c__i-msg" style="background-color: '.concat(t.safe(n),"; color: ").concat(t.safe(i),'">\n        <div class="mkz-c__i-msg-overflow">\n          ').concat(e,"\n        </div>\n      </div>")};switch(e.msg_type){case"survey:show":var s=e.custom_fields,r=s.submitted,a=s.hidden,c=s.elements.map((function(e){return e.value=s.values&&s.values[e.field],e})),l=s.follow_up_text?o(h.textFormatting(s.follow_up_text)):"";return(e.text?o(h.textFormatting(e.text)):"")+(r?l:a?"":o(this.form(c,e.muid)));default:var d=h.textFormatting(e.text);return"\n          ".concat(d?o(d):"","\n          ").concat(this.attachments(e))}}},{key:"doc",value:function(e){return'\n            <div class="mkz-c-docs__i">\n              <div class="mkz-c-docs__btn">\n                '.concat(this.safe(e),"\n              </div>\n            </div>")}},{key:"docs",value:function(){return""}},{key:"copy",value:function(){return this.appearance.markeaze_link?'\n      <a class="mkz-c__copy" href="https://markeaze.com?utm_source=markeaze&utm_campaign=referral" target="_blank">\n        <svg width="11" height="9" viewBox="0 0 10 8" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M1.94727 2.8471C2.12716 2.49158 2.57173 2.38949 2.87918 2.63311C3.12176 2.82531 3.19515 3.17138 3.05276 3.45164L1.17079 7.15577C0.991709 7.50824 0.550808 7.60949 0.24532 7.3683C0.0037509 7.17757 -0.0698014 6.83352 0.0713545 6.55454L1.94727 2.8471Z" fill="#FC4566"/>\n          <path d="M5.35667 1.9023C5.54038 1.55555 5.9926 1.45484 6.30746 1.69056C6.55814 1.87824 6.63496 2.21903 6.48885 2.49519L4.02121 7.15912C3.83664 7.50797 3.38122 7.60839 3.06569 7.36982C2.81616 7.18115 2.74036 6.8407 2.88648 6.5649L5.35667 1.9023Z" fill="#0EC52C"/>\n          <path d="M8.81247 0.351483C8.99329 -0.00816918 9.44199 -0.111851 9.75226 0.134322C9.99632 0.327953 10.0705 0.67639 9.92784 0.959046L6.80213 7.15236C6.62323 7.50684 6.18144 7.61011 5.87387 7.36934C5.62976 7.17824 5.55453 6.83147 5.6961 6.54989L8.81247 0.351483Z" fill="#7261FF"/>\n        </svg>\n        '.concat(this.t("copyright"),"\n      </a>"):""}},{key:"notice",value:function(){return this.appearance.notice_text&&this.appearance.notice_text.trim()?'\n      <div class="mkz-c__tooltip mkz-c__tooltip_picture_yes" style="color: '.concat(this.safe(this.appearance.notice_color),"; background-color: ").concat(this.safe(this.appearance.notice_bg),'">\n        <img src="').concat(this.safe(this.appearance.notice_icon_url),'" class="mkz-c__tooltip-picture" alt="" />\n        <div class="mkz-c__tooltip-text">\n          ').concat(this.safe(this.appearance.notice_text),"\n        </div>\n      </div>"):""}},{key:"content",value:function(){var e=["l-t","l-b","l"].indexOf(this.appearance.bar_position)>-1?"left":"right";return'\n<div mkz>\n  <div class="mkz-c mkz-c-js">\n\n    <div class="mkz-c__handler mkz-c__handler_type_'.concat(this.safe(this.appearance.bar_type)," mkz-c__handler_position_").concat(this.safe(this.appearance.bar_position)," ").concat(this.appearance.bar_bouncing?"mkz-c__handler_bouncing_yes":"",'" style="margin: ').concat(this.safe(this.appearance.bar_padding_y),"px ").concat(this.safe(this.appearance.bar_padding_x),'px">\n      ').concat(this.notice(),'\n      <div class="mkz-c__btn mkz-c-js-toggle" style="background-color: ').concat(this.appearance.bar_bg,"; color: ").concat(this.safe(this.appearance.bar_color),';">\n        <div class="mkz-c__btn-text">\n          <span class="mkz-c__btn-text-online">').concat(this.safe(this.appearance.bar_text_online),'</span>\n          <span class="mkz-c__btn-text-offline">').concat(this.safe(this.appearance.bar_text_offline),'</span>\n        </div>\n        <svg width="27" height="27" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" class="mkz-c__btn-picture">\n          <path d="M20.6429 10.4641C20.6466 11.8783 20.3162 13.2733 19.6786 14.5355C18.9226 16.0481 17.7605 17.3204 16.3223 18.2098C14.8841 19.0992 13.2267 19.5706 11.5357 19.5713C10.1216 19.5749 8.72659 19.2445 7.46432 18.607L1.35718 20.6427L3.39289 14.5355C2.75532 13.2733 2.42492 11.8783 2.42861 10.4641C2.42926 8.77313 2.90069 7.11573 3.79009 5.67755C4.67949 4.23937 5.95174 3.07721 7.46432 2.32125C8.72659 1.68368 10.1216 1.35328 11.5357 1.35696H12.0715C14.3047 1.48017 16.414 2.42278 17.9955 4.00431C19.5771 5.58585 20.5197 7.69516 20.6429 9.92839V10.4641Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n        <div class="mkz-c__btn-unread mkz-c-js-unread">0</div>\n      </div>\n    </div>\n\n    <div class="mkz-c__chat mkz-c__chat_position_').concat(e,'" style="').concat(this.view.width?"max-width: ".concat(this.view.width,"px;"):"",'">\n      <div class="mkz-c__cart-shadow" style="box-shadow: 0 0 10px ').concat(this.safe(this.appearance.title_bg),';"></div>\n      <div class="mkz-c__cart">\n        <div class="mkz-c__head" style="color: ').concat(this.safe(this.appearance.title_color),"; background-color: ").concat(this.safe(this.appearance.title_bg),';">\n          <div class="mkz-c__head-state">\n            <div class="mkz-c__state-wrap">\n              <img class="mkz-c__m-assign-avatar mkz-c-js-agent-avatar" alt="" />\n              <div class="mkz-c__state"></div>\n            </div>\n          </div>\n          <div class="mkz-c__head-m">\n            <div class="mkz-c__m-assign-text mkz-c-js-agent-name"></div>\n            <div class="mkz-c__m-assign-post mkz-c-js-agent-post"></div>\n            <div class="mkz-c__m-unassign-text">').concat(this.safe(this.appearance.bar_text_offline),'</div>\n          </div>\n          <div class="mkz-c__head-action">\n            <div class="mkz-c__close mkz-c-js-close">\n              <svg width="20" height="20" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M11.4287 4.57129L4.57153 11.4284" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n              <path d="M4.57153 4.57129L11.4287 11.4284" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n              </svg>\n            </div>\n          </div>\n        </div>\n        <div class="mkz-c__content mkz-c-js-scroll">\n          <div class="mkz-c__list mkz-c-js-history"></div>\n        </div>\n        ').concat(this.docs(),'\n        <label class="mkz-c__footer">\n          <div class="mkz-c__footer-msg">\n            <textarea class="mkz-c__input mkz-c-js-input" rows="1" placeholder="').concat(this.safe(this.appearance.placeholder||this.t("placeholder")),'"></textarea>\n          </div>\n          <div class="mkz-c__footer-btn">\n            <div class="mkz-c__submit mkz-c-js-submit">\n              <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M18.9675 0.949039L12.9784 17.6706C12.9069 17.8682 12.7194 17.9999 12.5092 18H12.3495C12.1535 18 11.9749 17.8874 11.8903 17.7105L9.53462 12.719C9.18774 11.9831 9.322 11.1103 9.874 10.5128L12.8686 7.23833C13.0524 7.04551 13.0524 6.74232 12.8686 6.5495L12.4893 6.17015C12.2965 5.98633 11.9933 5.98633 11.8005 6.17015L8.52644 9.16505C7.92893 9.71711 7.05625 9.85139 6.32044 9.50447L1.32949 7.14848C1.13702 7.076 1.00706 6.89483 1.00009 6.68926V6.52953C0.982409 6.30492 1.11738 6.09631 1.32949 6.0204L18.0492 0.0306031C18.2289 -0.0354106 18.4306 0.00725579 18.5682 0.140416L18.8278 0.399974C18.9838 0.536262 19.0394 0.754748 18.9675 0.949039Z" fill="currentColor"/>\n              </svg>\n            </div>\n          </div>\n        </label>\n      </div>\n      ').concat(this.copy(),'\n    </div>\n  </div>\n\n  <style type="text/css">').concat(l,"</style>\n\n</div>\n    ")}}]),e}()},function(e,t){e.exports={ru:{copyright:"Сделано в Markeaze",placeholder:"Напишите ваше сообщение...",in_stock:"В наличии",out_of_stock:"Не в наличии",view_product:"Посмотреть товар",add_to_cart:"Добавить в корзину",added_to_cart:"Добавлен в корзину",true:"Да",false:"Нет"},en:{copyright:"Powered by Markeaze",placeholder:"Type your message here...",in_stock:"In stock",out_of_stock:"Out of stock",view_product:"View product",add_to_cart:"Add to cart",added_to_cart:"Added to Cart!",true:"True",false:"False"}}},function(e,t){e.exports={trackShow:function(e){mkz("trackSurveyFormShow",{survey_form_uid:e})},trackSubmit:function(e,t){mkz("trackSurveyFormSubmit",{survey_form_uid:e},null,t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var i=n(1),o=n.n(i),s=n(2),r=n.n(s),a=function(){function e(t){var n=this;o()(this,e),this.audio=new Audio||document.createElement("video"),this.audio&&t&&(this.onload=!1,this.onplay=!1,this.audio.autoplay=!1,this.audio.load(),this.audio.canPlayType("audio/ogg")?this.audio.src=t+".ogg":this.audio.canPlayType("audio/mp3")&&(this.audio.src=t+".mp3"),this.audio.onloadeddata=function(){n.onload=!0,n.onplay&&n.playAction()})}return r()(e,[{key:"play",value:function(){this.audio&&(this.onload?this.playAction():this.onplay=!0)}},{key:"playAction",value:function(){this.audio.currentTime=0,this.audio.play().catch((function(e){}))}}]),e}()}]);